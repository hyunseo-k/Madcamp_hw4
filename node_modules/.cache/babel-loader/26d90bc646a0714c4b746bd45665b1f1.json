{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\(S)samsungFLEX5\\\\Desktop\\\\hw4_login\\\\src\\\\pages\\\\game\\\\components\\\\Drawboard.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport { fabric } from 'fabric';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst colorPalette = ['#000000', '#FF0000', '#00FF00', '#0000FF', '#FFFF00', '#FF00FF', '#00FFFF', '#FFFFFF'];\n\nconst Drawboard = () => {\n  _s();\n\n  const canvasRef = useRef(null);\n  const fabricCanvasRef = useRef(null);\n  const drawingToolRef = useRef(null);\n  const [isErasing, setIsErasing] = useState(false);\n  const [currentColor, setCurrentColor] = useState(colorPalette[0]);\n  useEffect(() => {\n    const canvas = new fabric.Canvas(canvasRef.current, {\n      width: 500,\n      height: 500,\n      backgroundColor: '#ffffff' // Set your desired canvas background color\n\n    });\n    fabricCanvasRef.current = canvas;\n    return () => {\n      // Clean up the Fabric.js canvas instance on unmount\n      canvas.dispose();\n    };\n  }, []);\n\n  const onMouseDown = event => {\n    if (drawingToolRef.current && drawingToolRef.current.onMouseDown) {\n      drawingToolRef.current.onMouseDown(event);\n    }\n  };\n\n  const onMouseMove = event => {\n    if (drawingToolRef.current && drawingToolRef.current.onMouseMove) {\n      drawingToolRef.current.onMouseMove(event);\n    }\n  };\n\n  const onMouseUp = event => {\n    if (drawingToolRef.current && drawingToolRef.current.onMouseUp) {\n      drawingToolRef.current.onMouseUp(event);\n    }\n  };\n\n  useEffect(() => {\n    const canvas = fabricCanvasRef.current; // Event handlers for mouse events\n\n    canvas.on('mouse:down', onMouseDown);\n    canvas.on('mouse:move', onMouseMove);\n    canvas.on('mouse:up', onMouseUp);\n    return () => {\n      // Remove the event listeners on unmount\n      canvas.off('mouse:down', onMouseDown);\n      canvas.off('mouse:move', onMouseMove);\n      canvas.off('mouse:up', onMouseUp);\n    };\n  }, []);\n\n  const setDrawingTool = tool => {\n    drawingToolRef.current = tool;\n  };\n\n  const enableFreeDrawing = () => {\n    const canvas = fabricCanvasRef.current;\n    canvas.isDrawingMode = true;\n    canvas.freeDrawingBrush.width = 2; // Set the brush width as needed\n\n    if (isErasing) {\n      canvas.freeDrawingBrush.color = '#ffffff'; // Set the brush color to white for erasing\n    } else {\n      canvas.freeDrawingBrush.color = currentColor; // Set the brush color to the selected color\n    }\n  };\n\n  const handleColorChange = color => {\n    setCurrentColor(color);\n    setIsErasing(false); // Disable eraser when a color is selected\n  };\n\n  const toggleEraser = () => {\n    setIsErasing(prev => !prev);\n    const canvas = fabricCanvasRef.current;\n\n    if (isErasing) {\n      canvas.isDrawingMode = true;\n      canvas.freeDrawingBrush.color = currentColor; // Set the brush color back to the selected color\n    } else {\n      canvas.isDrawingMode = false; // Disable drawing mode when eraser is active\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        style: {\n          width: '500px',\n          height: '500px',\n          border: '1px solid #ccc'\n          /* Add any other desired styles for the canvas here */\n\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Select Color: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this), colorPalette.map(color => /*#__PURE__*/_jsxDEV(\"button\", {\n        style: {\n          backgroundColor: color,\n          width: '30px',\n          height: '30px',\n          margin: '5px'\n        },\n        onClick: () => handleColorChange(color)\n      }, color, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: enableFreeDrawing,\n        children: \"Enable Drawing\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: toggleEraser,\n        children: isErasing ? 'Disable Eraser' : 'Enable Eraser'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Drawboard, \"EIiJrI7Ejab6YTg96IXw3vOY1us=\");\n\n_c = Drawboard;\nexport default Drawboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Drawboard\");","map":{"version":3,"names":["React","useEffect","useRef","useState","fabric","colorPalette","Drawboard","canvasRef","fabricCanvasRef","drawingToolRef","isErasing","setIsErasing","currentColor","setCurrentColor","canvas","Canvas","current","width","height","backgroundColor","dispose","onMouseDown","event","onMouseMove","onMouseUp","on","off","setDrawingTool","tool","enableFreeDrawing","isDrawingMode","freeDrawingBrush","color","handleColorChange","toggleEraser","prev","border","map","margin"],"sources":["C:/Users/(S)samsungFLEX5/Desktop/hw4_login/src/pages/game/components/Drawboard.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { fabric } from 'fabric';\r\n\r\nconst colorPalette = ['#000000', '#FF0000', '#00FF00', '#0000FF', '#FFFF00', '#FF00FF', '#00FFFF', '#FFFFFF'];\r\n\r\nconst Drawboard = () => {\r\n  const canvasRef = useRef(null);\r\n  const fabricCanvasRef = useRef(null);\r\n  const drawingToolRef = useRef(null);\r\n  const [isErasing, setIsErasing] = useState(false);\r\n  const [currentColor, setCurrentColor] = useState(colorPalette[0]);\r\n\r\n  useEffect(() => {\r\n    const canvas = new fabric.Canvas(canvasRef.current, {\r\n      width: 500,\r\n      height: 500,\r\n      backgroundColor: '#ffffff', // Set your desired canvas background color\r\n    });\r\n\r\n    fabricCanvasRef.current = canvas;\r\n\r\n    return () => {\r\n      // Clean up the Fabric.js canvas instance on unmount\r\n      canvas.dispose();\r\n    };\r\n  }, []);\r\n\r\n  const onMouseDown = (event) => {\r\n    if (drawingToolRef.current && drawingToolRef.current.onMouseDown) {\r\n      drawingToolRef.current.onMouseDown(event);\r\n    }\r\n  };\r\n\r\n  const onMouseMove = (event) => {\r\n    if (drawingToolRef.current && drawingToolRef.current.onMouseMove) {\r\n      drawingToolRef.current.onMouseMove(event);\r\n    }\r\n  };\r\n\r\n  const onMouseUp = (event) => {\r\n    if (drawingToolRef.current && drawingToolRef.current.onMouseUp) {\r\n      drawingToolRef.current.onMouseUp(event);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const canvas = fabricCanvasRef.current;\r\n\r\n    // Event handlers for mouse events\r\n    canvas.on('mouse:down', onMouseDown);\r\n    canvas.on('mouse:move', onMouseMove);\r\n    canvas.on('mouse:up', onMouseUp);\r\n\r\n    return () => {\r\n      // Remove the event listeners on unmount\r\n      canvas.off('mouse:down', onMouseDown);\r\n      canvas.off('mouse:move', onMouseMove);\r\n      canvas.off('mouse:up', onMouseUp);\r\n    };\r\n  }, []);\r\n\r\n  const setDrawingTool = (tool) => {\r\n    drawingToolRef.current = tool;\r\n  };\r\n\r\n  const enableFreeDrawing = () => {\r\n    const canvas = fabricCanvasRef.current;\r\n\r\n    canvas.isDrawingMode = true;\r\n    canvas.freeDrawingBrush.width = 2; // Set the brush width as needed\r\n\r\n    if (isErasing) {\r\n      canvas.freeDrawingBrush.color = '#ffffff'; // Set the brush color to white for erasing\r\n    } else {\r\n      canvas.freeDrawingBrush.color = currentColor; // Set the brush color to the selected color\r\n    }\r\n  };\r\n\r\n  const handleColorChange = (color) => {\r\n    setCurrentColor(color);\r\n    setIsErasing(false); // Disable eraser when a color is selected\r\n  };\r\n\r\n  const toggleEraser = () => {\r\n    setIsErasing((prev) => !prev);\r\n    const canvas = fabricCanvasRef.current;\r\n\r\n    if (isErasing) {\r\n      canvas.isDrawingMode = true;\r\n      canvas.freeDrawingBrush.color = currentColor; // Set the brush color back to the selected color\r\n    } else {\r\n      canvas.isDrawingMode = false; // Disable drawing mode when eraser is active\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div>\r\n        <canvas\r\n          ref={canvasRef}\r\n          style={{\r\n            width: '500px',\r\n            height: '500px',\r\n            border: '1px solid #ccc',\r\n            /* Add any other desired styles for the canvas here */\r\n          }}\r\n        />\r\n      </div>\r\n      <div>\r\n        <label>Select Color: </label>\r\n        {colorPalette.map((color) => (\r\n          <button\r\n            key={color}\r\n            style={{ backgroundColor: color, width: '30px', height: '30px', margin: '5px' }}\r\n            onClick={() => handleColorChange(color)}\r\n          />\r\n        ))}\r\n        <button onClick={enableFreeDrawing}>Enable Drawing</button>\r\n        <button onClick={toggleEraser}>{isErasing ? 'Disable Eraser' : 'Enable Eraser'}</button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Drawboard;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}